# clean-up unused docker images and volumes
docker rm $(docker ps -q -f status=exited)
docker volume rm $(docker volume ls -qf dangling=true)
docker rmi $(docker images --filter "dangling=true" -q --no-trunc)

# or, with ansible
ansible all -m shell -a "docker rm \$(docker ps -q -f status=exited); docker volume rm \$(docker volume ls -qf dangling=true); docker rmi \$(docker images --filter "dangling=true" -q --no-trunc)"

## remove all images from local docker daemon
for i in `docker images |grep -v REPO |awk '{print $3}'`; do docker rmi $i --force; done

## re-tag images from a remote docker client
## add tag alias
export TAG=v3.9; for i in `cat images.txt`; do docker pull repo.home.nicknach.net:5000/$i:v3.9; docker tag repo.home.nicknach.net:5000/$i:v3.9 repo.home.nicknach.net:5000/$i:$TAG; docker push repo.home.nicknach.net:5000/$i:$TAG; done
